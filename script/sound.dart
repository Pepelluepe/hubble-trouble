library sound;

import 'dart:js';


// Build new ones at http://egonelbre.com/project/jsfx/
var waves = {
    'bastacorp': ["saw",0.0000,0.1930,0.0000,0.2680,0.0000,0.0040,110.0000,878.0000,2400.0000,-0.9000,0.0000,0.0000,0.0100,0.0003,0.0000,0.0000,0.0000,0.5000,-0.2960,0.0000,0.0000,0.0000,1.0000,0.0000,0.0000,0.0000,0.0000],
    'select': ["square",2.0000,0.1930,0.0000,0.0020,0.5760,0.2760,20.0000,850.0000,2400.0000,0.0000,0.0000,0.0000,0.0100,0.0003,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,1.0000,0.0000,0.0000,0.0000,0.0000],
    'collect': ["square",0.0000,0.0520,0.0000,0.0320,0.4920,0.3600,20.0000,1320.0000,2400.0000,0.0000,0.0000,0.0000,0.0100,0.0003,0.0000,0.2620,0.1050,0.0000,0.0000,0.0000,0.0000,0.0000,1.0000,0.0000,0.0000,0.0000,0.0000],
    'keypress': ["noise",0.0000,0.0540,0.0000,0.0140,0.7560,0.0460,20.0000,1691.0000,2400.0000,-0.2680,0.0000,0.0000,0.0100,0.0003,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,-0.1320,-0.1860,1.0000,0.0000,0.0000,0.0000,0.0000],
};

JsObject _jsfxInst = null;

Map<String, JsObject> samples = {};

void init() {
    _jsfxInst = new JsObject(context['JSFX']);

    for (var wave in waves.keys) {
        samples[wave] = _jsfxInst.callMethod(
            'getSample',
            [new JsObject.jsify(waves[wave])]
        );
    }
}

void play(String name) {
    _jsfxInst.callMethod('playSample', [samples[name]]);
}
